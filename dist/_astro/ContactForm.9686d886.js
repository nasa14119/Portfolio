import{r as i}from"./index.ed373d49.js";import{C as h}from"./cross.d7971119.js";import{j as e}from"./jsx-runtime.391947bd.js";function d({confirm:n,err:s}){const[r,a]=i.useState(!0);return e.jsx("div",{className:`
        confimation
        fixed w-3/4 md:w-1/2 h-20 bottom-5 inset-x-auto flex justify-center items-center
        ${n?"bg-[#6fe26f]":"bg-[#db4c4c]"}
      `,"data-state":r,onAnimationEnd:()=>a(t=>!1),children:n?e.jsx("div",{className:"text-primary font-h1",children:"Message send succes"}):e.jsxs("div",{className:"flex flex-col text-center",children:[e.jsx("span",{className:"text-primary font-h1 text-lg",children:"Error Sending message"}),e.jsx("span",{children:s&&e.jsx("span",{children:s})})]})})}function p({handleSubmit:n}){const s=i.useRef(""),r=i.useRef(""),a=i.useRef("");return e.jsxs("form",{className:"contact",onSubmit:t=>{t.preventDefault(),n({email:s.current,name:r.current,comment:a.current})},children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx("span",{children:"Email"}),e.jsx("input",{type:"email",name:"email",id:"email",onChange:t=>s.current=t.target.value})]}),e.jsxs("label",{htmlFor:"name",children:[e.jsx("span",{children:"Name"}),e.jsx("input",{type:"text",name:"name",id:"name",onChange:t=>r.current=t.target.value})]}),e.jsxs("label",{htmlFor:"comment",children:[e.jsx("span",{children:"Comment"}),e.jsx("textarea",{type:"text",name:"comment",id:"comment",rows:3,onChange:t=>a.current=t.target.value})]}),e.jsx("input",{type:"submit",name:"submit",id:"submit",value:"send"})]})}async function j(n){console.log(!n.name||!n.email||!n.comment);let s={succes:!1,error:""};if(!n.name||!n.email||!n.comment)return s.error="Error in form",s;const{name:r,email:a,comment:t}=n;return await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",body:JSON.stringify({service_id:"service_h11gr18",template_id:"template_s12zw09",user_id:"A0vD7NY0LjlirK5LM",template_params:{name:r,email:a,comment:t}}),headers:{"Content-Type":"application/json"}}).then(l=>{s.succes=!0}).catch(l=>{s.error=l}),s}function y({text:n,classStyle:s}){const r=i.useRef(!1),[a,t]=i.useState("false"),[c,o]=i.useState(null);i.useEffect(()=>{if(c!==null)var m=setTimeout(()=>o(null),2e3);return()=>{clearTimeout(m)}},[c]);const l=()=>{r.current?t(()=>"true"):t(()=>"false")},u=()=>{r.current?t("get-out-form"):t("get-in-form"),r.current=!r.current},x=async m=>{let f=await j(m);f.succes?o(()=>e.jsx(d,{confirm:!0})):o(()=>e.jsx(d,{confirm:!1,err:f.error}))};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:s,onClick:u,children:n}),e.jsxs("div",{className:"container-contact","data-inview":a,children:[e.jsx("span",{className:"contact-cross",onClick:u,children:e.jsx("img",{src:h,alt:"cross"})}),e.jsx(p,{handleSubmit:x}),e.jsx("div",{className:"flex justify-center",children:c!==null?c:null})]}),e.jsx("div",{"data-inview":a,className:"background-form",onAnimationEnd:l})]})}export{y as ContactForm};
