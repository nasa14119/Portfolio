import{r as c}from"./index.ed373d49.js";let n=[],o=(i,r)=>{let s=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:r||0,lc:0,listen(l,u){return t.lc=s.push(l,u||t.l)/2,()=>{let e=s.indexOf(l);~e&&(s.splice(e,2),t.lc--,t.lc||t.off())}},notify(l){let u=!n.length;for(let e=0;e<s.length;e+=2)n.push(s[e],t.value,l,s[e+1]);if(u){for(let e=0;e<n.length;e+=4){let a=!1;for(let f=e+7;f<n.length;f+=4)if(n[f]<n[e+3]){a=!0;break}a?n.push(n[e],n[e+1],n[e+2],n[e+3]):n[e](n[e+1],n[e+2])}n.length=0}},off(){},set(l){t.value!==l&&(t.value=l,t.notify())},subscribe(l,u){let e=t.listen(l,u);return l(t.value),e},value:i};return t};function p(i,r,s){let t=new Set([...r,void 0]);return i.listen((l,u)=>{t.has(u)&&s(l,u)})}function b(i,r={}){let s=c.useCallback(l=>r.keys?p(i,r.keys,l):i.listen(l),[r.keys,i]),t=i.get.bind(i);return c.useSyncExternalStore(s,t,t)}const h=o(0),k=o(!1);export{k as l,h as p,b as u};
